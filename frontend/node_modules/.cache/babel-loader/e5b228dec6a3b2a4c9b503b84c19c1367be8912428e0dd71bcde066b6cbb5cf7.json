{"ast":null,"code":"'use strict';\n\nvar BPromise = require('bluebird');\n\n/**\n* Constructor\n* @param <object> geocoder  Geocoder Adapter\n* @param <object> formatter Formatter adapter or null\n*/\nvar Geocoder = function (geocoder, formatter) {\n  this._geocoder = geocoder;\n  this._formatter = formatter;\n};\n\n/**\n* Geocode a value (address or ip)\n* @param <string>   value    Value to geocoder (address or IP)\n* @param <function> callback Callback method\n*/\nGeocoder.prototype.geocode = function (value, callback) {\n  return BPromise.resolve().bind(this).then(function () {\n    return BPromise.fromCallback(function (callback) {\n      this._geocoder.geocode(value, callback);\n    }.bind(this));\n  }).then(function (data) {\n    return this._filter(value, data);\n  }).then(function (data) {\n    return this._format(data);\n  }).asCallback(callback);\n};\n\n/**\n* Reverse geocoding\n* @param {lat:<number>,lon:<number>}  lat: Latitude, lon: Longitude\n* @param {function} callback Callback method\n*/\nGeocoder.prototype.reverse = function (query, callback) {\n  return BPromise.resolve().bind(this).then(function () {\n    return BPromise.fromCallback(function (callback) {\n      this._geocoder.reverse(query, callback);\n    }.bind(this));\n  }).then(function (data) {\n    return this._format(data);\n  }).asCallback(callback);\n};\n\n/**\n* Batch geocode\n* @param <array>    values    array of Values to geocode (address or IP)\n* @param <function> callback\n*\n* @return promise\n*/\nGeocoder.prototype.batchGeocode = function (values, callback) {\n  return BPromise.resolve().bind(this).then(function () {\n    return BPromise.fromCallback(function (callback) {\n      this._geocoder.batchGeocode(values, callback);\n    }.bind(this));\n  }).asCallback(callback);\n};\nGeocoder.prototype._filter = function (value, data) {\n  if (!data || !data.length) {\n    return data;\n  }\n  if (value.minConfidence) {\n    data = data.filter(function (geocodedAddress) {\n      if (geocodedAddress.extra && geocodedAddress.extra.confidence) {\n        return geocodedAddress.extra.confidence >= value.minConfidence;\n      }\n    });\n  }\n  return data;\n};\nGeocoder.prototype._format = function (data) {\n  var _this = this;\n  return BPromise.resolve().bind(this).then(function () {\n    if (!data) {\n      return data;\n    }\n    var _raw = data.raw;\n    data = data.map(function (result) {\n      result.provider = _this._geocoder.name;\n      return result;\n    });\n    data.raw = _raw;\n    Object.defineProperty(data, 'raw', {\n      configurable: false,\n      enumerable: false,\n      writable: false\n    });\n    return data;\n  }).then(function (data) {\n    var _data = data;\n    if (this._formatter && this._formatter !== 'undefined') {\n      _data = this._formatter.format(_data);\n    }\n    return _data;\n  });\n};\nmodule.exports = Geocoder;","map":{"version":3,"names":["BPromise","require","Geocoder","geocoder","formatter","_geocoder","_formatter","prototype","geocode","value","callback","resolve","bind","then","fromCallback","data","_filter","_format","asCallback","reverse","query","batchGeocode","values","length","minConfidence","filter","geocodedAddress","extra","confidence","_this","_raw","raw","map","result","provider","name","Object","defineProperty","configurable","enumerable","writable","_data","format","module","exports"],"sources":["/home/pratheek/Desktop/Attendance/frontend/node_modules/node-geocoder/lib/geocoder.js"],"sourcesContent":["'use strict';\n\nvar BPromise = require('bluebird');\n\n/**\n* Constructor\n* @param <object> geocoder  Geocoder Adapter\n* @param <object> formatter Formatter adapter or null\n*/\nvar Geocoder = function (geocoder, formatter) {\n  this._geocoder = geocoder;\n  this._formatter = formatter;\n};\n\n/**\n* Geocode a value (address or ip)\n* @param <string>   value    Value to geocoder (address or IP)\n* @param <function> callback Callback method\n*/\nGeocoder.prototype.geocode = function (value, callback) {\n  return BPromise.resolve()\n    .bind(this)\n    .then(function() {\n      return BPromise.fromCallback(function(callback) {\n        this._geocoder.geocode(value, callback);\n      }.bind(this));\n    })\n    .then(function(data) {\n      return this._filter(value, data);\n    })\n    .then(function(data) {\n      return this._format(data);\n    })\n    .asCallback(callback);\n};\n\n/**\n* Reverse geocoding\n* @param {lat:<number>,lon:<number>}  lat: Latitude, lon: Longitude\n* @param {function} callback Callback method\n*/\nGeocoder.prototype.reverse = function(query, callback) {\n  return BPromise.resolve()\n    .bind(this)\n    .then(function() {\n      return BPromise.fromCallback(function(callback) {\n        this._geocoder.reverse(query, callback);\n      }.bind(this));\n    })\n    .then(function(data) {\n      return this._format(data);\n    })\n    .asCallback(callback);\n};\n\n/**\n* Batch geocode\n* @param <array>    values    array of Values to geocode (address or IP)\n* @param <function> callback\n*\n* @return promise\n*/\nGeocoder.prototype.batchGeocode = function(values, callback) {\n  return BPromise.resolve()\n    .bind(this)\n    .then(function() {\n      return BPromise.fromCallback(function(callback) {\n        this._geocoder.batchGeocode(values, callback);\n      }.bind(this));\n    })\n    .asCallback(callback);\n};\n\nGeocoder.prototype._filter = function (value, data) {\n  if (!data || !data.length) {\n    return data;\n  }\n\n  if (value.minConfidence) {\n    data = data.filter(function(geocodedAddress) {\n      if (geocodedAddress.extra && geocodedAddress.extra.confidence) {\n        return geocodedAddress.extra.confidence >= value.minConfidence;\n      }\n    });\n  }\n\n  return data;\n};\n\nGeocoder.prototype._format = function (data) {\n  var _this = this;\n  return BPromise.resolve()\n    .bind(this)\n    .then(function() {\n      if (!data) {\n        return data;\n      }\n\n      var _raw = data.raw;\n\n      data = data.map(function(result) {\n        result.provider = _this._geocoder.name;\n\n        return result;\n      });\n\n      data.raw = _raw;\n      Object.defineProperty(data,'raw',{configurable:false, enumerable:false, writable:false});\n\n      return data;\n    })\n    .then(function(data) {\n      var _data = data;\n      if (this._formatter && this._formatter !== 'undefined') {\n        _data = this._formatter.format(_data);\n      }\n\n      return _data;\n    });\n};\n\nmodule.exports = Geocoder;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}